<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>riemann.influxdb documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Riemann</span> <span class="project-version">0.3.8</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>riemann</span></div></div></li><li class="depth-2 branch"><a href="riemann.bin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bin</span></div></a></li><li class="depth-2 branch"><a href="riemann.blueflood.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blueflood</span></div></a></li><li class="depth-2 branch"><a href="riemann.boundary.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>boundary</span></div></a></li><li class="depth-2 branch"><a href="riemann.cloudwatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cloudwatch</span></div></a></li><li class="depth-2 branch"><a href="riemann.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="riemann.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="riemann.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="riemann.datadog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datadog</span></div></a></li><li class="depth-2 branch"><a href="riemann.deps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deps</span></div></a></li><li class="depth-2 branch"><a href="riemann.druid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>druid</span></div></a></li><li class="depth-2 branch"><a href="riemann.elasticsearch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elasticsearch</span></div></a></li><li class="depth-2 branch"><a href="riemann.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="riemann.expiration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expiration</span></div></a></li><li class="depth-2 branch"><a href="riemann.folds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>folds</span></div></a></li><li class="depth-2 branch"><a href="riemann.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-2 branch"><a href="riemann.hipchat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hipchat</span></div></a></li><li class="depth-2 branch"><a href="riemann.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch current"><a href="riemann.influxdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.influxdb2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb2</span></div></a></li><li class="depth-2 branch"><a href="riemann.instrumentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrumentation</span></div></a></li><li class="depth-2 branch"><a href="riemann.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2 branch"><a href="riemann.kairosdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kairosdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.keenio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keenio</span></div></a></li><li class="depth-2 branch"><a href="riemann.librato.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>librato</span></div></a></li><li class="depth-2 branch"><a href="riemann.logentries.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logentries</span></div></a></li><li class="depth-2 branch"><a href="riemann.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2 branch"><a href="riemann.logstash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logstash</span></div></a></li><li class="depth-2 branch"><a href="riemann.mailgun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mailgun</span></div></a></li><li class="depth-2 branch"><a href="riemann.msteams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>msteams</span></div></a></li><li class="depth-2 branch"><a href="riemann.nagios.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nagios</span></div></a></li><li class="depth-2 branch"><a href="riemann.netuitive.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>netuitive</span></div></a></li><li class="depth-2 branch"><a href="riemann.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.opsgenie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opsgenie</span></div></a></li><li class="depth-2 branch"><a href="riemann.pagerduty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pagerduty</span></div></a></li><li class="depth-2 branch"><a href="riemann.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li><li class="depth-2 branch"><a href="riemann.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-2 branch"><a href="riemann.prometheus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prometheus</span></div></a></li><li class="depth-2 branch"><a href="riemann.pubsub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pubsub</span></div></a></li><li class="depth-2 branch"><a href="riemann.pushover.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pushover</span></div></a></li><li class="depth-2 branch"><a href="riemann.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="riemann.rabbitmq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rabbitmq</span></div></a></li><li class="depth-2 branch"><a href="riemann.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="riemann.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-2 branch"><a href="riemann.shinken.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shinken</span></div></a></li><li class="depth-2 branch"><a href="riemann.slack.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slack</span></div></a></li><li class="depth-2 branch"><a href="riemann.sns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sns</span></div></a></li><li class="depth-2 branch"><a href="riemann.stackdriver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stackdriver</span></div></a></li><li class="depth-2"><a href="riemann.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-3"><a href="riemann.streams.pure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pure</span></div></a></li><li class="depth-2 branch"><a href="riemann.telegram.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>telegram</span></div></a></li><li class="depth-2 branch"><a href="riemann.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="riemann.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="riemann.time.controlled.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controlled</span></div></a></li><li class="depth-2"><a href="riemann.transport.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.rabbitmq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rabbitmq</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.tcp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcp</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.udp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>udp</span></div></a></li><li class="depth-3"><a href="riemann.transport.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li><li class="depth-2 branch"><a href="riemann.twilio.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>twilio</span></div></a></li><li class="depth-2 branch"><a href="riemann.victorops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>victorops</span></div></a></li><li class="depth-2 branch"><a href="riemann.xymon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xymon</span></div></a></li><li class="depth-2"><a href="riemann.zabbix.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zabbix</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riemann.influxdb.html#var-convert-time"><div class="inner"><span>convert-time</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-converts-double"><div class="inner"><span>converts-double</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-default-opts"><div class="inner"><span>default-opts</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-.3Epoint"><div class="inner"><span>event-&gt;point</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-.3Epoint-9"><div class="inner"><span>event-&gt;point-9</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-fields"><div class="inner"><span>event-fields</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-event-tags"><div class="inner"><span>event-tags</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-batchpoint"><div class="inner"><span>get-batchpoint</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-batchpoints"><div class="inner"><span>get-batchpoints</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-builder"><div class="inner"><span>get-builder</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-client"><div class="inner"><span>get-client</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-hostname-verifier"><div class="inner"><span>get-hostname-verifier</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-ssl-factory"><div class="inner"><span>get-ssl-factory</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-time-unit"><div class="inner"><span>get-time-unit</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-get-trust-manager"><div class="inner"><span>get-trust-manager</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb"><div class="inner"><span>influxdb</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb-deprecated"><div class="inner"><span>influxdb-deprecated</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-influxdb-new-stream"><div class="inner"><span>influxdb-new-stream</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-nil-or-empty-str"><div class="inner"><span>nil-or-empty-str</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-partition-events"><div class="inner"><span>partition-events</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-special-fields"><div class="inner"><span>special-fields</span></div></a></li><li class="depth-1"><a href="riemann.influxdb.html#var-write-batch-point"><div class="inner"><span>write-batch-point</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">riemann.influxdb</h1><div class="doc"><div class="markdown"><p>Forwards events to InfluxDB. Supports InfluxDB 0.9 or higher.</p></div></div><div class="public anchor" id="var-convert-time"><h3>convert-time</h3><div class="usage"><code>(convert-time time-event precision)</code></div><div class="doc"><div class="markdown"><p>Converts the <code>time-event</code> parameter (which is time second) in a new time unit specified by the <code>precision</code> parameter. It also converts the time to long.</p>
<p>The <code>precision</code> parameter is a keyword whose possible values are <code>:seconds</code>, <code>:milliseconds</code> and <code>:microseconds</code>.</p>
<p>Returns time in seconds by default.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L113">view source</a></div></div><div class="public anchor" id="var-converts-double"><h3>converts-double</h3><div class="usage"><code>(converts-double n)</code></div><div class="doc"><div class="markdown"><p>if n if a ratio or a BigInt, converts it to double. Returns n otherwise.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L126">view source</a></div></div><div class="public anchor" id="var-default-opts"><h3>default-opts</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Default influxdb options</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L173">view source</a></div></div><div class="public anchor" id="var-event-.3Epoint"><h3>event-&gt;point</h3><div class="usage"><code>(event-&gt;point event opts)</code></div><div class="doc"><div class="markdown"><p>Converts a Riemann event into an InfluxDB Point (an instance of <code>org.influxdb.dto.Point</code>.</p>
<p>The first parameter is the event:</p>
<ul>
  <li>The <code>:precision</code> event key is used to converts the event <code>time</code> into the correct time unit (default seconds).</li>
  <li>The <code>:measurement</code> event key is the influxdb measurement.</li>
  <li>The <code>:influxdb-tags</code> event key contains all the Influxdb tags.</li>
  <li>The <code>:influxdb-fields</code> event key contains all the Influxdb fields.</li>
</ul>
<p>The second parameter is the option map passed to the influxdb stream.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L151">view source</a></div></div><div class="public anchor" id="var-event-.3Epoint-9"><h3>event-&gt;point-9</h3><div class="usage"><code>(event-&gt;point-9 event opts)</code></div><div class="doc"><div class="markdown"><p>Converts a Riemann event into an InfluxDB Point (an instance of <code>org.influxdb.dto.Point</code>.</p>
<ul>
  <li>The first parameter is the event. The <code>:precision</code> key of the event is used to converts the event <code>time</code> into the correct time unit (default seconds).</li>
  <li>The second parameter is the option map passed to the InfluxDB stream.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L134">view source</a></div></div><div class="public anchor" id="var-event-fields"><h3>event-fields</h3><div class="usage"><code>(event-fields tag-fields event)</code></div><div class="doc"><div class="markdown"><p>Generates a map of InfluxDB fields from a Riemann event.</p>
<p>The eventâ€™s <code>metric</code> is converted to the <code>value</code> field, and any additional event fields which are not standard Riemann properties or in <code>tag-fields</code> will also be present.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L35">view source</a></div></div><div class="public anchor" id="var-event-tags"><h3>event-tags</h3><div class="usage"><code>(event-tags tag-fields event)</code></div><div class="doc"><div class="markdown"><p>Generates a map of InfluxDB tags from a Riemann event.</p>
<p>Any fields in the event which are named in <code>tag-fields</code> will be converted to a string key/value entry in the tag map.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L23">view source</a></div></div><div class="public anchor" id="var-get-batchpoint"><h3>get-batchpoint</h3><div class="usage"><code>(get-batchpoint {:keys [tags db retention consistency]})</code></div><div class="doc"><div class="markdown"><p>Returns a <code>org.influxdb.dto.BatchPoints</code> instance.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L91">view source</a></div></div><div class="public anchor" id="var-get-batchpoints"><h3>get-batchpoints</h3><div class="usage"><code>(get-batchpoints opts events)</code></div><div class="doc"><div class="markdown"><p>Create a <code>org.influxdb.dto.BatchPoints</code> for each element in the <code>events</code> list. <code>events</code> is a list where each element is a list of events.</p>
<p>Each element contains events with the same <code>:db</code>, <code>:retention</code> and <code>:consistency</code> keys.</p>
<p>These options are used to create the BatchPoints. <code>opts</code> are the global influxdb stream options.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L193">view source</a></div></div><div class="public anchor" id="var-get-builder"><h3>get-builder</h3><div class="usage"><code>(get-builder {:keys [timeout insecure]})</code></div><div class="doc"><div class="markdown"><p>Returns a new okhttp3.OkHttpClient$Builder.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L73">view source</a></div></div><div class="public anchor" id="var-get-client"><h3>get-client</h3><div class="usage"><code>(get-client {:keys [scheme host port username password], :as opts})</code></div><div class="doc"><div class="markdown"><p>Returns an <code>org.influxdb.InfluxDB</code> instance.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L85">view source</a></div></div><div class="public anchor" id="var-get-hostname-verifier"><h3>get-hostname-verifier</h3><div class="usage"><code>(get-hostname-verifier)</code></div><div class="doc"><div class="markdown"><p>Get an instance of <code>javax.net.ssl.HostnameVerifier</code>.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L66">view source</a></div></div><div class="public anchor" id="var-get-ssl-factory"><h3>get-ssl-factory</h3><div class="usage"><code>(get-ssl-factory)</code></div><div class="doc"><div class="markdown"><p>Get an instance of <code>javax.net.ssl.SSLSocketFactory</code>.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L59">view source</a></div></div><div class="public anchor" id="var-get-time-unit"><h3>get-time-unit</h3><div class="usage"><code>(get-time-unit precision)</code></div><div class="doc"><div class="markdown"><p>Returns a value from the TimeUnit enum depending of the <code>precision</code> parameters.</p>
<p>The <code>precision</code> parameter is a keyword whose possible values are <code>:seconds</code>, <code>:milliseconds</code> and <code>:microseconds</code>.</p>
<p>Returns <code>TimeUnit/SECONDS</code> by default.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L100">view source</a></div></div><div class="public anchor" id="var-get-trust-manager"><h3>get-trust-manager</h3><div class="usage"><code>(get-trust-manager)</code></div><div class="doc"><div class="markdown"><p>Returns an array with an instance of <code>X509TrustManager</code> Used for trust all certs in the InfluxDB <code>insecure</code> mode.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L49">view source</a></div></div><div class="public anchor" id="var-influxdb"><h3>influxdb</h3><div class="usage"><code>(influxdb opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and writes them to InfluxDB as a batch of measurement points. For performance, you should wrap this stream with <code>batch</code> or an asynchronous queue.</p>
<p>Support InfluxDB 0.9 to InfluxDB 1.7.</p>
<pre><code class="clojure">(influxdb {:host "influxdb.example.com"
           :db "my_db"
           :username "riemann"
           :password "secret"})
</code></pre>
<p>General Options:</p>
<ul>
  <li><code>:db</code> Name of the database to write to. (default: <code>"riemann"</code>)</li>
  <li><code>:version</code> Version of InfluxDB client to use. (default: <code>":deprecated"</code>)</li>
  <li><code>:scheme</code> URL scheme for endpoint. (default: <code>"http"</code>)</li>
  <li><code>:host</code> Hostname to write points to. (default: <code>"localhost"</code>)</li>
  <li><code>:port</code> API port number. (default: <code>8086</code>)</li>
  <li><code>:username</code> Database user to authenticate as. (default: <code>"root"</code>)</li>
  <li><code>:password</code> Password to authenticate with. (optional)</li>
  <li><code>:tags</code> A common map of tags to apply to all points. (optional)</li>
  <li><code>:retention</code> Name of retention policy to use. (optional)</li>
  <li><code>:timeout</code> HTTP timeout in milliseconds. (default: <code>5000</code>)</li>
  <li><code>:consistency</code> The InfluxDB consistency level (default: <code>"ONE"</code>). Possibles values are ALL, ANY, ONE, QUORUM.</li>
  <li><code>:insecure</code> If scheme is https and certficate is self-signed. (optional)</li>
  <li><code>:precision</code> The time precision. Possibles values are <code>:seconds</code>, <code>:milliseconds</code> and <code>:microseconds</code> (default <code>:seconds</code>). The event <code>time</code> will be converted.</li>
</ul>
<p>See <code>influxdb-deprecated</code> and <code>influxdb-new-stream</code> for version-specific options.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L271">view source</a></div></div><div class="public anchor" id="var-influxdb-deprecated"><h3>influxdb-deprecated</h3><div class="usage"><code>(influxdb-deprecated opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and writes them to InfluxDB.</p>
<p>InfluxDB-deprecated specifics options:</p>
<ul>
  <li><code>:tag-fields</code> A set of event fields to map into InfluxDB series tags.  (default: <code>#{:host}</code>).</li>
</ul>
<p>Each event can have these keys:</p>
<ul>
  <li><code>:tag-fields</code> A set of event fields to map into InfluxDB series tags.</li>
  <li><code>:precision</code> The time precision. Possibles values are <code>:seconds</code>, <code>:milliseconds</code> and <code>:microseconds</code> (default <code>:seconds</code>). The event <code>time</code> will be converted.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L246">view source</a></div></div><div class="public anchor" id="var-influxdb-new-stream"><h3>influxdb-new-stream</h3><div class="usage"><code>(influxdb-new-stream opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event, or sequence of events, and writes them to InfluxDB.</p>
<p>Streams receive an event or a list of events. Each event can have these keys:</p>
<ul>
  <li><code>:measurement</code> The InfluxDB measurement.</li>
  <li><code>:influxdb-tags</code> A map of InfluxDB tags. Example: <code>{:foo "bar"}</code></li>
  <li><code>:influxdb-fields</code> A map of InfluxDB fields. Example: <code>{:bar "baz"}</code></li>
  <li><code>:precision</code> The time precision. Possibles values are <code>:seconds</code>, <code>:milliseconds</code> and <code>:microseconds</code> (default <code>:seconds</code>). The event <code>time</code> will be converted.</li>
  <li><code>:db</code> Name of the database to write to (optional).</li>
  <li><code>:retention</code> Name of retention policy to use (optional).</li>
  <li><code>:consistency</code> The InfluxDB consistency level (default: <code>"ONE"</code>). Possibles values are ALL, ANY, ONE, QUORUM.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L223">view source</a></div></div><div class="public anchor" id="var-nil-or-empty-str"><h3>nil-or-empty-str</h3><div class="usage"><code>(nil-or-empty-str s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L13">view source</a></div></div><div class="public anchor" id="var-partition-events"><h3>partition-events</h3><div class="usage"><code>(partition-events events)</code></div><div class="doc"><div class="markdown"><p><code>events</code> is a list of events.</p>
<p>Partition <code>events</code> depending of the <code>db</code>, <code>retention</code> and <code>consistency</code> keys returns a list, each element being a list of events (the result of the partitioning).</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L213">view source</a></div></div><div class="public anchor" id="var-special-fields"><h3>special-fields</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A set of event fields in Riemann with special handling logic.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L18">view source</a></div></div><div class="public anchor" id="var-write-batch-point"><h3>write-batch-point</h3><div class="usage"><code>(write-batch-point connection batch-point)</code></div><div class="doc"><div class="markdown"><p>Write to InfluxDB the <code>batch-point</code> using the <code>connection</code>.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.8/src/riemann/influxdb.clj#L188">view source</a></div></div></div></body></html>