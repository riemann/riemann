<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.folds documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Riemann 0.2.7 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>riemann</span></div></div></li><li class="depth-2 branch"><a href="riemann.bin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bin</span></div></a></li><li class="depth-2 branch"><a href="riemann.blueflood.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blueflood</span></div></a></li><li class="depth-2 branch"><a href="riemann.campfire.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>campfire</span></div></a></li><li class="depth-2 branch"><a href="riemann.cloudwatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cloudwatch</span></div></a></li><li class="depth-2 branch"><a href="riemann.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="riemann.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="riemann.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="riemann.datadog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datadog</span></div></a></li><li class="depth-2 branch"><a href="riemann.deps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deps</span></div></a></li><li class="depth-2 branch"><a href="riemann.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch current"><a href="riemann.folds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>folds</span></div></a></li><li class="depth-2 branch"><a href="riemann.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-2 branch"><a href="riemann.hipchat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hipchat</span></div></a></li><li class="depth-2 branch"><a href="riemann.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="riemann.influxdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.instrumentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrumentation</span></div></a></li><li class="depth-2 branch"><a href="riemann.kairosdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kairosdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.librato.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>librato</span></div></a></li><li class="depth-2 branch"><a href="riemann.logentries.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logentries</span></div></a></li><li class="depth-2 branch"><a href="riemann.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2 branch"><a href="riemann.logstash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logstash</span></div></a></li><li class="depth-2 branch"><a href="riemann.mailgun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mailgun</span></div></a></li><li class="depth-2 branch"><a href="riemann.nagios.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nagios</span></div></a></li><li class="depth-2 branch"><a href="riemann.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.opsgenie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opsgenie</span></div></a></li><li class="depth-2 branch"><a href="riemann.pagerduty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pagerduty</span></div></a></li><li class="depth-2 branch"><a href="riemann.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li><li class="depth-2 branch"><a href="riemann.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-2 branch"><a href="riemann.pubsub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pubsub</span></div></a></li><li class="depth-2 branch"><a href="riemann.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="riemann.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="riemann.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-2 branch"><a href="riemann.shinken.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shinken</span></div></a></li><li class="depth-2 branch"><a href="riemann.slack.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slack</span></div></a></li><li class="depth-2 branch"><a href="riemann.sns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sns</span></div></a></li><li class="depth-2 branch"><a href="riemann.stackdriver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stackdriver</span></div></a></li><li class="depth-2 branch"><a href="riemann.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-2 branch"><a href="riemann.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="riemann.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="riemann.time.controlled.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controlled</span></div></a></li><li class="depth-2"><a href="riemann.transport.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.tcp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcp</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.udp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>udp</span></div></a></li><li class="depth-3"><a href="riemann.transport.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li><li class="depth-2 branch"><a href="riemann.twilio.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>twilio</span></div></a></li><li class="depth-2"><a href="riemann.xymon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xymon</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riemann.folds.html#var-count"><div class="inner"><span>count</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-difference"><div class="inner"><span>difference</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-difference*"><div class="inner"><span>difference*</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-extremum"><div class="inner"><span>extremum</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-fold"><div class="inner"><span>fold</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-fold*"><div class="inner"><span>fold*</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-fold-all"><div class="inner"><span>fold-all</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-maximum"><div class="inner"><span>maximum</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-mean"><div class="inner"><span>mean</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-median"><div class="inner"><span>median</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-minimum"><div class="inner"><span>minimum</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-non-nil-metrics"><div class="inner"><span>non-nil-metrics</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-product"><div class="inner"><span>product</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-product*"><div class="inner"><span>product*</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-quotient"><div class="inner"><span>quotient</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-quotient*"><div class="inner"><span>quotient*</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-quotient-sloppy"><div class="inner"><span>quotient-sloppy</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-sorted-sample"><div class="inner"><span>sorted-sample</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-sorted-sample-extract"><div class="inner"><span>sorted-sample-extract</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-std-dev"><div class="inner"><span>std-dev</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-sum"><div class="inner"><span>sum</span></div></a></li><li class="depth-1"><a href="riemann.folds.html#var-sum*"><div class="inner"><span>sum*</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">riemann.folds</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-count"><h3>count</h3><div class="usage"><code>(count events)</code></div><div class="doc"><div class="markdown"><p>Returns the number of events.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L203">view source</a></div></div><div class="public anchor" id="var-difference"><h3>difference</h3><div class="usage"><code>(difference events)</code></div><div class="doc"><div class="markdown"><p>Subtracts events. Returns the first event, with its metric reduced by the metrics of all subsequent events with metrics. Returns nil if the first event is nil, or its metric is nil.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L121">view source</a></div></div><div class="public anchor" id="var-difference*"><h3>difference*</h3><div class="usage"><code>(difference* events)</code></div><div class="doc"><div class="markdown"><p>Subtracts events. Returns the first event, with its metric reduced by the metrics of all subsequent events.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L115">view source</a></div></div><div class="public anchor" id="var-extremum"><h3>extremum</h3><div class="usage"><code>(extremum comparison events)</code></div><div class="doc"><div class="markdown"><p>Returns an extreme event, by a comparison function over the metric.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L171">view source</a></div></div><div class="public anchor" id="var-fold"><h3>fold</h3><div class="usage"><code>(fold f events)</code></div><div class="doc"><div class="markdown"><p>Fold with a reduction function over metrics. Ignores nil events and events with nil metrics.</p><p>If there are <em>no</em> non-nil events, returns nil.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L66">view source</a></div></div><div class="public anchor" id="var-fold*"><h3>fold*</h3><div class="usage"><code>(fold* f events)</code></div><div class="doc"><div class="markdown"><p>Fold with a reduction function over metrics. Throws if any event or metric is nil.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L60">view source</a></div></div><div class="public anchor" id="var-fold-all"><h3>fold-all</h3><div class="usage"><code>(fold-all f events)</code></div><div class="doc"><div class="markdown"><p>Fold with a reduction function over metrics.</p><p>If the first event has a nil :metric, or if any remaining event is nil, or has a nil metric, returns the first event, but with :metric nil and a :description of the error.</p><p>If the first event is nil, returns nil.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L75">view source</a></div></div><div class="public anchor" id="var-maximum"><h3>maximum</h3><div class="usage"><code>(maximum events)</code></div><div class="doc"><div class="markdown"><p>Returns the maximum event, by metric.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L187">view source</a></div></div><div class="public anchor" id="var-mean"><h3>mean</h3><div class="usage"><code>(mean events)</code></div><div class="doc"><div class="markdown"><p>Averages events together. Mean metric, merged into first of events. Ignores nil events and nil metrics.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L156">view source</a></div></div><div class="public anchor" id="var-median"><h3>median</h3><div class="usage"><code>(median events)</code></div><div class="doc"><div class="markdown"><p>Returns the median event from events, by metric.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L166">view source</a></div></div><div class="public anchor" id="var-minimum"><h3>minimum</h3><div class="usage"><code>(minimum events)</code></div><div class="doc"><div class="markdown"><p>Returns the minimum event, by metric.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L182">view source</a></div></div><div class="public anchor" id="var-non-nil-metrics"><h3>non-nil-metrics</h3><div class="usage"><code>(non-nil-metrics events)</code></div><div class="doc"><div class="markdown"><p>Given a sequence of events, returns a compact sequence of their metrics&ndash;that is, omits any events which are nil, or have nil metrics.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L51">view source</a></div></div><div class="public anchor" id="var-product"><h3>product</h3><div class="usage"><code>(product events)</code></div><div class="doc"><div class="markdown"><p>Multiplies events. Returns the first event with a metric, with its metric being the product of all events with metrics.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L109">view source</a></div></div><div class="public anchor" id="var-product*"><h3>product*</h3><div class="usage"><code>(product* events)</code></div><div class="doc"><div class="markdown"><p>Multiplies events. Returns the first event, with its metric multiplied by the metrics of all other events.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L103">view source</a></div></div><div class="public anchor" id="var-quotient"><h3>quotient</h3><div class="usage"><code>(quotient events)</code></div><div class="doc"><div class="markdown"><p>Divides events. Returns the first event, with its metric divided by the product of the metrics of all subsequent events.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L135">view source</a></div></div><div class="public anchor" id="var-quotient*"><h3>quotient*</h3><div class="usage"><code>(quotient* events)</code></div><div class="doc"><div class="markdown"><p>Divides events. Returns the first event, with its metric divided by the product of the metrics of all subsequent events. Like quotient, but throws when any metric is nil or a divisor is zero.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L128">view source</a></div></div><div class="public anchor" id="var-quotient-sloppy"><h3>quotient-sloppy</h3><div class="usage"><code>(quotient-sloppy events)</code></div><div class="doc"><div class="markdown"><p>Like quotient, but considers 0/0 = 0. Useful for relative rates, when you want the ratio of two constant values to be zero.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L147">view source</a></div></div><div class="public anchor" id="var-sorted-sample"><h3>sorted-sample</h3><div class="usage"><code>(sorted-sample s points)</code></div><div class="doc"><div class="markdown"><p>Sample a sequence of events at points. Returns events with service remapped to (str service &ldquo; &rdquo; point). For instance, (sorted-sample events [0 1]) returns a 2-element seq of the smallest event and the biggest event, by metric. The first has a service which ends in &ldquo; 0&rdquo; and the second one ends in &ldquo; 1&rdquo;. If the points is a map, eg (sorted-sample events {0 &ldquo;.min&rdquo; 1 &ldquo;.max&rdquo;}, the the values will be appened to the service name directly. Useful for extracting histograms and percentiles.</p><p>When s is empty, returns an empty list.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L31">view source</a></div></div><div class="public anchor" id="var-sorted-sample-extract"><h3>sorted-sample-extract</h3><div class="usage"><code>(sorted-sample-extract s points)</code></div><div class="doc"><div class="markdown"><p>Returns the events in seqable s, sorted and taken at each point p of points, where p ranges from 0 (smallest metric) to 1 (largest metric). 0.5 is the median event, 0.95 is the 95th&rsquo; percentile event, and so forth. Ignores events without a metric.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L16">view source</a></div></div><div class="public anchor" id="var-std-dev"><h3>std-dev</h3><div class="usage"><code>(std-dev events)</code></div><div class="doc"><div class="markdown"><p>calculates standard deviation across a seq of events</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L192">view source</a></div></div><div class="public anchor" id="var-sum"><h3>sum</h3><div class="usage"><code>(sum events)</code></div><div class="doc"><div class="markdown"><p>Adds events together. Sums metrics, merges into first event with a metric, ignores nil events and nil metrics.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L97">view source</a></div></div><div class="public anchor" id="var-sum*"><h3>sum*</h3><div class="usage"><code>(sum* events)</code></div><div class="doc"><div class="markdown"><p>Adds events together. Sums metrics, merges into first of events.</p></div></div><div class="src-link"><a href="http://github.com/aphyr/riemann/blob/master/src/riemann/folds.clj#L92">view source</a></div></div></div></body></html>