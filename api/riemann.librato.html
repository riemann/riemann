<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann.librato documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.2.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="riemann.bin.html"><span>riemann.bin</span></a></li><li><a href="riemann.campfire.html"><span>riemann.campfire</span></a></li><li><a href="riemann.common.html"><span>riemann.common</span></a></li><li><a href="riemann.config.html"><span>riemann.config</span></a></li><li><a href="riemann.core.html"><span>riemann.core</span></a></li><li><a href="riemann.deps.html"><span>riemann.deps</span></a></li><li><a href="riemann.email.html"><span>riemann.email</span></a></li><li><a href="riemann.folds.html"><span>riemann.folds</span></a></li><li><a href="riemann.graphite.html"><span>riemann.graphite</span></a></li><li><a href="riemann.index.html"><span>riemann.index</span></a></li><li><a href="riemann.instrumentation.html"><span>riemann.instrumentation</span></a></li><li class="current"><a href="riemann.librato.html"><span>riemann.librato</span></a></li><li><a href="riemann.logging.html"><span>riemann.logging</span></a></li><li><a href="riemann.pagerduty.html"><span>riemann.pagerduty</span></a></li><li><a href="riemann.pool.html"><span>riemann.pool</span></a></li><li><a href="riemann.pubsub.html"><span>riemann.pubsub</span></a></li><li><a href="riemann.query.html"><span>riemann.query</span></a></li><li><a href="riemann.repl.html"><span>riemann.repl</span></a></li><li><a href="riemann.service.html"><span>riemann.service</span></a></li><li><a href="riemann.sns.html"><span>riemann.sns</span></a></li><li><a href="riemann.streams.html"><span>riemann.streams</span></a></li><li><a href="riemann.time.html"><span>riemann.time</span></a></li><li><a href="riemann.time.controlled.html"><span>riemann.time.controlled</span></a></li><li><a href="riemann.transport.html"><span>riemann.transport</span></a></li><li><a href="riemann.transport.graphite.html"><span>riemann.transport.graphite</span></a></li><li><a href="riemann.transport.tcp.html"><span>riemann.transport.tcp</span></a></li><li><a href="riemann.transport.udp.html"><span>riemann.transport.udp</span></a></li><li><a href="riemann.transport.websockets.html"><span>riemann.transport.websockets</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann.librato.html#var-event-%3Eannotation"><span>event-&gt;annotation</span></a></li><li><a href="riemann.librato.html#var-event-%3Egauge"><span>event-&gt;gauge</span></a></li><li><a href="riemann.librato.html#var-librato-metrics"><span>librato-metrics</span></a></li><li><a href="riemann.librato.html#var-safe-name"><span>safe-name</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann.librato documentation</h2><pre class="doc"></pre><div class="public" id="var-event-%3Eannotation"><h3>event-&gt;annotation</h3><div class="usage"><code>(event-&gt;annotation event)</code></div><pre class="doc">Converts an event to an annotation.
</pre></div><div class="public" id="var-event-%3Egauge"><h3>event-&gt;gauge</h3><div class="usage"><code>(event-&gt;gauge event)</code></div><pre class="doc">Converts an event to a gauge.
</pre></div><div class="public" id="var-librato-metrics"><h3>librato-metrics</h3><div class="usage"><code>(librato-metrics user api-key)</code></div><pre class="doc">Creates a librato metrics adapter. Takes your username and API key, and
returns a map of streams:

:gauge
:counter
:annotation
:start-annotation
:end-annotation

Gauge and counter submit events as measurements. Annotation creates an
annotation from the given event; it will have only a start time unless
:end-time is given. :start-annotation will *start* an annotation; the
annotation ID for that host and service will be remembered. :end-annotation
will submit an end-time for the most recent annotation submitted with
:start-annotation.

Example:

(def librato (librato-metrics &quot;aphyr@aphyr.com&quot; &quot;abcd01234...&quot;))

(tagged &quot;latency&quot; (librato :gauge))

(where (service &quot;www&quot;)
  (changed-state
    (where (state &quot;ok&quot;)
      (:start-annotation librato)
      (else
        (:end-annotation librato)))))</pre></div><div class="public" id="var-safe-name"><h3>safe-name</h3><div class="usage"><code>(safe-name s)</code></div><pre class="doc">Converts a string into a safe name for Librato's metrics and streams.
Converts spaces to periods, preserves only A-Za-z0-9.:-_, and cuts to 255
characters.</pre></div></div></body></html>