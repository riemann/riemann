<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>riemann.xymon documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Riemann</span> <span class="project-version">0.3.9-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>riemann</span></div></div></li><li class="depth-2 branch"><a href="riemann.bin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bin</span></div></a></li><li class="depth-2 branch"><a href="riemann.blueflood.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>blueflood</span></div></a></li><li class="depth-2 branch"><a href="riemann.boundary.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>boundary</span></div></a></li><li class="depth-2 branch"><a href="riemann.cloudwatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cloudwatch</span></div></a></li><li class="depth-2 branch"><a href="riemann.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="riemann.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="riemann.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="riemann.datadog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datadog</span></div></a></li><li class="depth-2 branch"><a href="riemann.deps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deps</span></div></a></li><li class="depth-2 branch"><a href="riemann.druid.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>druid</span></div></a></li><li class="depth-2 branch"><a href="riemann.elasticsearch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elasticsearch</span></div></a></li><li class="depth-2 branch"><a href="riemann.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="riemann.expiration.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expiration</span></div></a></li><li class="depth-2 branch"><a href="riemann.folds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>folds</span></div></a></li><li class="depth-2 branch"><a href="riemann.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-2 branch"><a href="riemann.hipchat.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hipchat</span></div></a></li><li class="depth-2 branch"><a href="riemann.index.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>index</span></div></a></li><li class="depth-2 branch"><a href="riemann.influxdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.influxdb2.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>influxdb2</span></div></a></li><li class="depth-2 branch"><a href="riemann.instrumentation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instrumentation</span></div></a></li><li class="depth-2 branch"><a href="riemann.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-2 branch"><a href="riemann.kairosdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kairosdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.keenio.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keenio</span></div></a></li><li class="depth-2 branch"><a href="riemann.librato.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>librato</span></div></a></li><li class="depth-2 branch"><a href="riemann.logentries.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logentries</span></div></a></li><li class="depth-2 branch"><a href="riemann.logging.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logging</span></div></a></li><li class="depth-2 branch"><a href="riemann.logstash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>logstash</span></div></a></li><li class="depth-2 branch"><a href="riemann.mailgun.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mailgun</span></div></a></li><li class="depth-2 branch"><a href="riemann.msteams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>msteams</span></div></a></li><li class="depth-2 branch"><a href="riemann.nagios.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nagios</span></div></a></li><li class="depth-2 branch"><a href="riemann.netuitive.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>netuitive</span></div></a></li><li class="depth-2 branch"><a href="riemann.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-2 branch"><a href="riemann.opsgenie.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opsgenie</span></div></a></li><li class="depth-2 branch"><a href="riemann.pagerduty.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pagerduty</span></div></a></li><li class="depth-2 branch"><a href="riemann.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li><li class="depth-2 branch"><a href="riemann.pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pool</span></div></a></li><li class="depth-2 branch"><a href="riemann.prometheus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prometheus</span></div></a></li><li class="depth-2 branch"><a href="riemann.pubsub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pubsub</span></div></a></li><li class="depth-2 branch"><a href="riemann.pushover.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pushover</span></div></a></li><li class="depth-2 branch"><a href="riemann.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="riemann.rabbitmq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rabbitmq</span></div></a></li><li class="depth-2 branch"><a href="riemann.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="riemann.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-2 branch"><a href="riemann.shinken.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shinken</span></div></a></li><li class="depth-2 branch"><a href="riemann.slack.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slack</span></div></a></li><li class="depth-2 branch"><a href="riemann.sns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sns</span></div></a></li><li class="depth-2 branch"><a href="riemann.stackdriver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stackdriver</span></div></a></li><li class="depth-2"><a href="riemann.streams.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>streams</span></div></a></li><li class="depth-3"><a href="riemann.streams.pure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pure</span></div></a></li><li class="depth-2 branch"><a href="riemann.telegram.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>telegram</span></div></a></li><li class="depth-2 branch"><a href="riemann.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-2"><a href="riemann.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="riemann.time.controlled.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>controlled</span></div></a></li><li class="depth-2"><a href="riemann.transport.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.graphite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graphite</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.opentsdb.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>opentsdb</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.rabbitmq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rabbitmq</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.sse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sse</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.tcp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcp</span></div></a></li><li class="depth-3 branch"><a href="riemann.transport.udp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>udp</span></div></a></li><li class="depth-3"><a href="riemann.transport.websockets.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>websockets</span></div></a></li><li class="depth-2 branch"><a href="riemann.twilio.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>twilio</span></div></a></li><li class="depth-2 branch"><a href="riemann.victorops.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>victorops</span></div></a></li><li class="depth-2 branch current"><a href="riemann.xymon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xymon</span></div></a></li><li class="depth-2"><a href="riemann.zabbix.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zabbix</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riemann.xymon.html#var-event-.3Edisable"><div class="inner"><span>event-&gt;disable</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-event-.3Eenable"><div class="inner"><span>event-&gt;enable</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-event-.3Estatus"><div class="inner"><span>event-&gt;status</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-events-.3Ecombo"><div class="inner"><span>events-&gt;combo</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-host-.3Exymon"><div class="inner"><span>host-&gt;xymon</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-message-max-length"><div class="inner"><span>message-max-length</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-send-message"><div class="inner"><span>send-message</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-send-message-error"><div class="inner"><span>send-message-error</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-send-single-message"><div class="inner"><span>send-single-message</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-service-.3Exymon"><div class="inner"><span>service-&gt;xymon</span></div></a></li><li class="depth-1"><a href="riemann.xymon.html#var-xymon"><div class="inner"><span>xymon</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">riemann.xymon</h1><div class="doc"><div class="markdown"><p>Forwards events to Xymon</p></div></div><div class="public anchor" id="var-event-.3Edisable"><h3>event-&gt;disable</h3><div class="usage"><code>(event-&gt;disable {:keys [host service ttl description], :or {host "", service "*", description ""}})</code></div><div class="doc"><div class="markdown"><p>Converts an event to a Xymon disable message:</p>
<p>disable HOSTNAME.TESTNAME DURATION <additional text=""></additional></p>
<p>Fields mapping is the same as event-&gt;status’. Also, the event ttl is used as duration, same as LIFETIME in event-&gt;status.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L57">view source</a></div></div><div class="public anchor" id="var-event-.3Eenable"><h3>event-&gt;enable</h3><div class="usage"><code>(event-&gt;enable {:keys [host service], :or {host "", service "*"}})</code></div><div class="doc"><div class="markdown"><p>Converts an event to an Xymon enable message:</p>
<p>enable HOSTNAME.TESTNAME</p>
<p>if no service is provided, the complete host is enabled.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L44">view source</a></div></div><div class="public anchor" id="var-event-.3Estatus"><h3>event-&gt;status</h3><div class="usage"><code>(event-&gt;status {:keys [ttl host service state description], :or {host "", service "", description "", state "unknown"}})</code></div><div class="doc"><div class="markdown"><p>Formats an event as a Xymon status message:</p>
<p>status[+LIFETIME][/group:GROUP] HOSTNAME.TESTNAME COLOR <additional text=""></additional></p>
<p>Note about fields mapping:  - HOSTNAME results from the string conversion (“.” -&gt; “,”) of :host  - TESTNAME results from the string conversion (#“(.| )” -&gt; "_“) of :service  - COLOR is taken as is from :state  - <additional text=""> is taken ”as is" from :description  - GROUP is not handled  - LIFETIME results from the rounding up to the nearest whole number of the division by 60 of :ttl.  - No :ttl (i.e. :ttl nil) ends up with no LIFETIME set (defaults to Xymon server’s default lifetime)  - :ttl 0 becomes +0 LIFETIME and will end up as immediate purple</additional></p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L20">view source</a></div></div><div class="public anchor" id="var-events-.3Ecombo"><h3>events-&gt;combo</h3><div class="usage"><code>(events-&gt;combo formatter events)</code><code>(events-&gt;combo formatter events messages len)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy sequence of combo messages. Each message is at most message-max-length long.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L136">view source</a></div></div><div class="public anchor" id="var-host-.3Exymon"><h3>host-&gt;xymon</h3><div class="usage"><code>(host-&gt;xymon host)</code></div><div class="doc"><div class="markdown"><p>Formats an hostname for Xymon. Basically, replaces all dot chars by commas.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L10">view source</a></div></div><div class="public anchor" id="var-message-max-length"><h3>message-max-length</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L126">view source</a></div></div><div class="public anchor" id="var-send-message"><h3>send-message</h3><div class="usage"><code>(send-message opts message)</code></div><div class="doc"><div class="markdown"><p>Sends given message to Xymon host(s).</p>
<p>If (:hosts opts) is a sequence <em>and</em> (:host opts) is false, sends the message to all hosts described in (:hosts opts). When provided (:host opts) should be a list of map and send-single-message will invoked with (merge opts &lt;item in :hosts&gt;).</p>
<p>If (:host opts) is not false, sends the message to opts.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L107">view source</a></div></div><div class="public anchor" id="var-send-message-error"><h3>send-message-error</h3><div class="usage"><code>(send-message-error opts exception)</code></div><div class="doc"><div class="markdown"><p>Logs given exception as an error message.</p>
<p>send-message-error is the default error handler invoked by send-single-message if none is provided.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L72">view source</a></div></div><div class="public anchor" id="var-send-single-message"><h3>send-single-message</h3><div class="usage"><code>(send-single-message opts message)</code></div><div class="doc"><div class="markdown"><p>Connects to a Xymon server, sends message, then closes the connection. This is a blocking operation and should happen on a dedicated thread.</p>
<p>If any exception is raised during the connect/send process, the result of (:error-handler opts send-message-error) is invoked as a function with opts and the exception as its parameter.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L82">view source</a></div></div><div class="public anchor" id="var-service-.3Exymon"><h3>service-&gt;xymon</h3><div class="usage"><code>(service-&gt;xymon service)</code></div><div class="doc"><div class="markdown"><p>Formats a service name to be understood by Xymon.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L15">view source</a></div></div><div class="public anchor" id="var-xymon"><h3>xymon</h3><div class="usage"><code>(xymon opts)</code></div><div class="doc"><div class="markdown"><p>Returns a function which accepts an event or a vector of events and which sends them to Xymon, as ‘combo’ messages if specified. Filters events with nil :state or :service. Use:</p>
<p>(xymon {:host “127.0.0.1” :port 1984  :timeout 5000 :formatter event-&gt;status})</p>
<p>The :timeout value is expressed in milliseconds, as specified in java.net.Socket documentation.</p></div></div><div class="src-link"><a href="https://github.com/riemann/riemann/blob/0.3.9-SNAPSHOT/src/riemann/xymon.clj#L163">view source</a></div></div></div></body></html>